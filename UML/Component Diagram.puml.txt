@startuml
skinparam componentStyle rectangle
title Component Diagram - GenAI Conversational BI Assistant

package "Client" {
  [Web UI\n(Chat + Charts)] as WebUI
}

package "Backend API" {
  [Chat API\n(Controller)] as ChatAPI
  [Auth & RBAC] as Auth
  [Feedback Service] as Feedback
  [Audit Logger] as Audit
}

package "Data/AI Services" {
  [Cache Service\n(KV Store)] as Cache
  [Vector Search\n(Vector DB)] as VectorDB
  [Embedding Service] as Embed
  [GenAI SQL Generator] as GenAI
  [SQL Validator] as Validator
  [Query Executor] as Executor
  [Report Service\n(Chart + Summary)] as Report
  [Document Store] as DocStore
  [Training Data Manager] as TrainMgr
}

database "Business Database\n(Postgres/MySQL/etc.)" as BizDB
cloud "LLM Provider" as LLM

WebUI --> ChatAPI : HTTPS\naskQuestion(), getResponse()
ChatAPI --> Auth : authenticate()
ChatAPI --> Cache : get/put
ChatAPI --> VectorDB : search/upsert
VectorDB --> Embed : embed(text)
ChatAPI --> GenAI : generateSQL(prompt)
GenAI --> LLM : API call
ChatAPI --> Validator : validate(sql)
ChatAPI --> Executor : execute(sql)
Executor --> BizDB : SQL
ChatAPI --> Report : chart+summary
ChatAPI --> Feedback : recordVote()
ChatAPI --> Audit : logEvent()

TrainMgr --> DocStore : store/list docs
TrainMgr --> VectorDB : upsert docs embeddings

@enduml
